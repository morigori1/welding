<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>印刷用エディタ（排他選択）</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 20px; }
    .row { display: flex; gap: 24px; align-items: flex-start; }
    .box { border: 1px solid #ddd; padding: 12px; border-radius: 6px; }
    .list { height: 360px; overflow: auto; width: 360px; }
    .muted { color: #555; }
    .actions { margin-top: 12px; }
    label { display: block; margin: 2px 0; }
  </style>
</head>
<body>
  <h1>印刷用エディタ（排他選択）</h1>
  <div><a href="/ver">一覧登録へ</a></div>

  <form action="/ver/editor/preview" method="post">
    <div class="row">
      <div class="box">
        <div>
          日付 <input type="date" name="date" value="{{ date }}">
          &nbsp;&nbsp;モード：
          <label style="display:inline"><input type="radio" name="mode" value="person" {% if mode == 'person' %}checked{% endif %}> 人で選ぶ</label>
          <label style="display:inline"><input type="radio" name="mode" value="qualification" {% if mode == 'qualification' %}checked{% endif %}> 資格で選ぶ</label>
        </div>
        <div class="muted">モードは排他です（どちらか一方のみ選択）。資格フィルタ（部分一致）: <input type="text" name="qual_filter" value="{{ qual_filter }}" placeholder="例: SC-3F"></div>
      </div>
    </div>

    <div class="row">
      <div class="box">
        <h3>人（氏名）</h3>
        <div class="list">
          {% for p in persons %}
          <label><input type="checkbox" name="persons" value="{{ p.name }}"> {{ p.name }} {% if p.dept %}<span class="muted">[{{ p.dept }}]</span>{% endif %} <span class="muted">({{ p.count }})</span></label>
          {% endfor %}
          {% if not persons %}<div class="muted">データなし</div>{% endif %}
        </div>
      </div>
      <div class="box">
        <h3>資格（種類）</h3>
        <div class="list">
          {% for q in quals %}
          <label><input type="checkbox" name="quals" value="{{ q }}"> {{ q }}</label>
          {% endfor %}
          {% if not quals %}<div class="muted">データなし</div>{% endif %}
        </div>
      </div>
    </div>

    <div class="actions">
      担当者（任意）<input type="text" name="operator" placeholder="例：総務A">
      <button type="submit">プレビュー（印刷）</button>
    </div>
  </form>
</body>
</html>
