{% extends 'layout.html' %}
{% block body %}
  <h3>名簿（DuckDB: roster）</h3>
  <p><a href="{{ url_for('report') }}">印刷レポート</a> | <a href="{{ url_for('input_form') }}">手入力</a></p>
  <form method="get">
    <input type="text" name="q" value="{{ q }}" placeholder="氏名で検索" style="width:320px;padding:6px" />
    <label><input type="checkbox" name="active" value="1" {% if only_active %}checked{% endif %}/> 在籍のみ（workers）</label>
    <button type="submit">検索</button>
  </form>
  <table style="margin-top:12px">
    <tr><th>氏名</th><th>件数</th></tr>
    {% for n,c in persons %}
      <tr>
        <td><a href="{{ url_for('person') }}?name={{ n }}">{{ n }}</a></td>
        <td style="text-align:right">{{ c }}</td>
      </tr>
    {% endfor %}
  </table>
{% endblock %}

